<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SPNREC - Smart Campus Hub</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
</head>

<body>


    <nav class="navbar">
        <div class="logo"><i class="fas fa-university"></i> SPNREC</div>
        <div class="nav-links">
            <button onclick="showSection('notices')" class="active">Notices</button>
            <button onclick="showSection('issues')">Issues</button>
            <button onclick="showSection('lostfound')">Lost & Found</button>
        </div>
        
        <div class="auth-wrapper">
            <button id="loginBtn" onclick="openLoginModal()">Login</button>
            <div id="userProfile" class="hidden" style="display: flex; align-items: center; gap: 10px;">
                <span id="userName" style="font-weight: 600; color: var(--primary);"></span>
                <button onclick="logout()"
                    style="background: var(--danger); color: white; border: none; border-radius: 5px; padding: 8px 15px; cursor: pointer;">
                    <i class="fas fa-sign-out-alt"></i>
                </button>
            </div>
        </div>
    </nav>

    <div class="search-wrapper">
        <input type="text" id="searchInput" placeholder="Search notices, issues, or lost items..."
            onkeyup="globalSearch()">
        <button class="filter-trigger" onclick="toggleFilter()"><i class="fas fa-sliders-h"></i></button>

        <div id="filterPopup" class="filter-popup">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                <h4 style="margin:0; color:var(--primary);">Filter by Date</h4>
                <i class="fas fa-times" onclick="toggleFilter()" style="cursor: pointer; color: #999;"></i>
            </div>

            <div class="filter-group">
                <input type="date" id="dateStart" class="auth-input" style="padding: 8px; margin-bottom: 5px;"
                    onchange="applyFilters()">
                <input type="date" id="dateEnd" class="auth-input" style="padding: 8px;" onchange="applyFilters()">
            </div>

            <button onclick="resetFilters()"
                style="width: 100%; background: #f3f4f6; border: 1px solid #ddd; padding: 8px; border-radius: 8px; cursor: pointer; color: var(--text-main); font-weight: 600;">
                Reset Filters
            </button>
        </div>
    </div>

    <div class="container">

        <section id="notices" class="content-section">
            <div class="section-header">
                <h2>Campus Notices</h2>
                <div class="create-btn-wrapper admin-only hidden">
                    <button class="create-btn" onclick="openModal('noticeModal')">+ New Notice</button>
                </div>
            </div>
            <div id="noticeList" class="grid-container"></div>
        </section>

        <section id="issues" class="content-section hidden">
            <div class="section-header">
                <h2>Student Issues</h2>
                <div class="create-btn-wrapper student-only hidden">
                    <button class="create-btn" onclick="openModal('issueModal')">Raise Issue</button>
                </div>
            </div>
            <div id="issueList" class="grid-container"></div>
        </section>

        <section id="lostfound" class="content-section hidden">
            <div class="section-header">
                <h2>Lost & Found</h2>
                <div class="create-btn-wrapper">
                    <button class="create-btn" onclick="openModal('lfModal')">Report Item</button>
                </div>
            </div>
            <div id="lfList" class="grid-container"></div>
        </section>

    </div>

    <div id="loginModal" class="modal">
        <div class="modal-content">
            <span onclick="closeModal('loginModal')"
                style="float:right; cursor:pointer; font-size:1.5rem;">&times;</span>
            <h2 id="authTitle" style="color: var(--text-main);">Welcome Back</h2>

            <div id="roleSelection">
                <p style="color: var(--text-light);">Select your role to continue</p>
                <div class="role-select-container">
                    <div class="role-card" onclick="selectRole('student')" id="roleStudent">
                        <i class="fas fa-user-graduate"></i>
                        <div>Student</div>
                    </div>
                    <div class="role-card" onclick="selectRole('admin')" id="roleAdmin">
                        <i class="fas fa-user-shield"></i>
                        <div>Admin</div>
                    </div>
                </div>
            </div>

            <form id="authForm" style="display:none; text-align: left;">
                <input type="text" id="username" class="auth-input hidden" placeholder="Full Name">
                <input type="email" id="email" class="auth-input" placeholder="Email Address" required>
                <input type="password" id="password" class="auth-input" placeholder="Password" required>

                <div id="adminPassField" class="hidden">
                    <label style="font-size:0.8rem; color: var(--primary); font-weight: bold;">Admin Passcode
                        Required:</label>
                    <input type="password" id="adminPasscode" class="auth-input" placeholder="Enter Admin Passcode">
                </div>

                <button type="button" class="auth-btn" onclick="handleAuthSubmit()">Login</button>

                <span class="toggle-link" onclick="toggleAuthMode()">New here? Create Account</span>
            </form>
        </div>
    </div>

    <div id="noticeModal" class="modal">
        <div class="modal-content">
            <h3>Post Notice</h3>
            <input id="nTitle" class="auth-input" placeholder="Title">
            <textarea id="nDesc" class="auth-input" rows="3" placeholder="Description"></textarea>
            <select id="nCategory" class="auth-input">
                <option value="Event">Event</option>
                <option value="Exam">Exam</option>
                <option value="Holiday">Holiday</option>
            </select>
            <button class="auth-btn" onclick="postNotice()">Post</button>
            <button onclick="closeModal('noticeModal')"
                style="background:none; border:none; color:red; margin-top:10px; cursor:pointer;">Cancel</button>
        </div>
    </div>

    <div id="issueModal" class="modal">
        <div class="modal-content">
            <h3>Raise Issue</h3>
            <select id="iType" class="auth-input">
                <option value="WiFi">WiFi</option>
                <option value="Hostel">Hostel</option>
                <option value="Classroom">Classroom</option>
            </select>
            <textarea id="iDesc" class="auth-input" rows="3" placeholder="Describe issue..."></textarea>
            <button class="auth-btn" onclick="postIssue()">Submit</button>
            <button onclick="closeModal('issueModal')"
                style="background:none; 
                border:none; 
                color:red; 
                margin-top:10px; 
                cursor:pointer;">Cancel</button>
        </div>
    </div>

    <div id="lfModal" class="modal">
        <div class="modal-content">
            <h3>Lost & Found</h3>
            <select id="lfType" class="auth-input">
                <option value="Lost">Lost Item</option>
                <option value="Found">Found Item</option>
            </select>
            <textarea id="lfDesc" class="auth-input" rows="3" placeholder="Description..."></textarea>
            <button class="auth-btn" onclick="postLF()">Report</button>
            <button onclick="closeModal('lfModal')"
                style="background:none; border:none; color:red; margin-top:10px; cursor:pointer;">Cancel</button>
        </div>
    </div>

    <script src="script.js"></script>
</body>

</html>